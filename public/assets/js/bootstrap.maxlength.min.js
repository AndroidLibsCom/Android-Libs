(function(a){if(!a.event.special.destroyed){a.event.special.destroyed={remove:function(b){if(b.handler){b.handler()}}}}a.fn.extend({maxlength:function(p,n){var h=a("body"),c={showOnReady:false,alwaysShow:false,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important",separator:" / ",preText:"",postText:"",showMaxLength:true,placement:"bottom",showCharsTyped:true,validate:false,utf8:false,appendToParent:false};if(a.isFunction(p)&&!n){n=p;p={}}p=a.extend(c,p);function d(q){var s=q.val();s=s.replace(new RegExp("\r?\n","g"),"\n");var r=0;if(p.utf8){r=i(q.val())}else{r=q.val().length}return r}function i(r){var q=0;for(var t=0;t<r.length;t++){var s=r.charCodeAt(t);if(s<128){q++}else{if((s>127)&&(s<2048)){q=q+2}else{q=q+3}}}return q}function g(r,t,s){var q=true;if(!p.alwaysShow&&(s-d(r)>t)){q=false}return q}function j(q,r){var s=r-d(q);return s}function f(q){q.css({display:"block"})}function l(q){q.css({display:"none"})}function m(r,s){var q="";if(p.message){q=p.message.replace("%charsTyped%",s).replace("%charsRemaining%",r-s).replace("%charsTotal%",r)}else{if(p.preText){q+=p.preText}if(!p.showCharsTyped){q+=r-s}else{q+=s}if(p.showMaxLength){q+=p.separator+r}if(p.postText){q+=p.postText}}return q}function e(r,q,s,t){t.html(m(s,(s-r)));if(r>0){if(g(q,p.threshold,s)){f(t.removeClass(p.limitReachedClass).addClass(p.warningClass))}else{l(t)}}else{f(t.removeClass(p.warningClass).addClass(p.limitReachedClass))}}function o(q){var r=q[0];return a.extend({},(typeof r.getBoundingClientRect==="function")?r.getBoundingClientRect():{width:r.offsetWidth,height:r.offsetHeight},q.offset())}function b(q,u){var w=o(q),t=q.outerWidth(),s=u.outerWidth(),r=u.width(),v=u.height();if(p.appendToParent){w.top-=q.parent().offset().top;w.left-=q.parent().offset().left}switch(p.placement){case"bottom":u.css({top:w.top+w.height,left:w.left+w.width/2-r/2});break;case"top":u.css({top:w.top-v,left:w.left+w.width/2-r/2});break;case"left":u.css({top:w.top+w.height/2-v/2,left:w.left-r});break;case"right":u.css({top:w.top+w.height/2-v/2,left:w.left+w.width});break;case"bottom-right":u.css({top:w.top+w.height,left:w.left+w.width});break;case"top-right":u.css({top:w.top-v,left:w.left+t});break;case"top-left":u.css({top:w.top-v,left:w.left-s});break;case"bottom-left":u.css({top:w.top+q.outerHeight(),left:w.left-s});break;case"centered-right":u.css({top:w.top+(v/2),left:w.left+t-s-3});break;case"bottom-right-inside":u.css({top:w.top+w.height,left:w.left+w.width-s});break;case"top-right-inside":u.css({top:w.top-v,left:w.left+t-s});break;case"top-left-inside":u.css({top:w.top-v,left:w.left});break;case"bottom-left-inside":u.css({top:w.top+q.outerHeight(),left:w.left});break}}function k(q){return q.attr("maxlength")||q.attr("size")}return this.each(function(){var r=a(this),s,t;a(window).resize(function(){if(t){b(r,t)}});function q(){var v=m(s,"0");s=k(r);if(!t){t=a('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}).html(v)}if(r.is("textarea")){r.data("maxlenghtsizex",r.outerWidth());r.data("maxlenghtsizey",r.outerHeight());r.mouseup(function(){if(r.outerWidth()!==r.data("maxlenghtsizex")||r.outerHeight()!==r.data("maxlenghtsizey")){b(r,t)}r.data("maxlenghtsizex",r.outerWidth());r.data("maxlenghtsizey",r.outerHeight())})}if(p.appendToParent){r.parent().append(t);r.parent().css("position","relative")}else{h.append(t)}var u=j(r,k(r));e(u,r,s,t);b(r,t)}if(p.showOnReady){r.ready(function(){q()})}else{r.focus(function(){q()})}r.on("destroyed",function(){if(t){t.remove()}});r.on("blur",function(){if(t&&!p.showOnReady){t.remove()}});r.keyup(function(){var v=j(r,k(r)),u=true;if(p.validate&&v<0){u=false}else{e(v,r,s,t)}if(p.placement==="bottom-right-inside"||p.placement==="top-right-inside"){b(r,t)}return u})})}})}(jQuery));